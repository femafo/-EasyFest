#!/bin/bash

# Configura las variables
THRESHOLD=90
EMAIL="tu_correo@example.com"
SUBJECT="Advertencia: Poco Espacio en Disco"
MESSAGE="Advertencia: El espacio en disco ha sobrepasado el umbral."

# Verifica el espacio en disco y env√≠a una advertencia si es necesario
df -H | grep -vE '^Filesystem|tmpfs|cdrom' | awk '{ print $5 " " $1 }' | while read output;
do
    USEP=$(echo $output | awk '{ print $1}' | cut -d'%' -f1)
    PART=$(echo $output | awk '{ print $2 }')
    if [ $USEP -ge $THRESHOLD ]; then
        echo -e "$MESSAGE ($USEP% en $PART)" | mail -s "$SUBJECT" $EMAIL
    fi
done
